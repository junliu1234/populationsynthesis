<ProjectConfig>
  <Skip run="False"/>
  <Project name="bmc_popgen" location="/tmp"/>
  <DBConfig dbprotocol = "mysql" dbhost="localhost" dbname="bmc_popgen" dbusername="root" dbpassword="1234"/>
	
  <Inputs create="False">
    <GeographicCorrespondence location="/home/kkonduri/data/bmc_data/latest_taz_marginals/bmc_geocorr.csv"/>
    <HouseholdSample location="/home/kkonduri/data/bmc_data/PUMS/full_bmc_region/hhld_sample.csv"/>
    <GQSample location="/home/kkonduri/data/bmc_data/PUMS/full_bmc_region/gq_sample.csv"/>
    <PersonSample location="/home/kkonduri/data/bmc_data/PUMS/full_bmc_region/person_sample.csv"/>
    <HouseholdControl location="/home/kkonduri/data/bmc_data/latest_taz_marginals/2000/household_marginals.csv"/>
    <GQControl location="/home/kkonduri/data/bmc_data/latest_taz_marginals/2000/groupquarters_marginals.csv"/>
    <PersonControl location="/home/kkonduri/data/bmc_data/latest_taz_marginals/2000/person_marginals.csv"/>
  </Inputs>

  <Scenario value="1" description="Test Scenario" prepare_data="True" run="True">
  <ControlVariables>
    <Household>
      <Variable name="persons_bmc" order="1" num_categories="5" control="True"/>
      <Variable name="hinc_bmc" order="2" num_categories="4" control="True"/>
      <Variable name="wif_bmc" order="3" num_categories="4" control="True"/>
    </Household>
    <GroupQuarter>
      <Variable name="gq" order="1" num_categories="2" control="True"/>
    </GroupQuarter>
    <Person control="True">
      <Variable name="esr_bmc" order="1" num_categories="2" control="True"/>
    </Person>
  </ControlVariables>    

  <CorrespondenceMap>
    <Household>
      <ControlVariableMap name="persons_bmc" category="1" marginal_variable="hhperson1"/>
      <ControlVariableMap name="persons_bmc" category="2" marginal_variable="hhperson2"/>
      <ControlVariableMap name="persons_bmc" category="3" marginal_variable="hhperson3"/>
      <ControlVariableMap name="persons_bmc" category="4" marginal_variable="hhperson4"/>
      <ControlVariableMap name="persons_bmc" category="5" marginal_variable="hhperson5"/>
      <ControlVariableMap name="hinc_bmc" category="1" marginal_variable="hhincgroup1"/>
      <ControlVariableMap name="hinc_bmc" category="2" marginal_variable="hhincgroup2"/>
      <ControlVariableMap name="hinc_bmc" category="3" marginal_variable="hhincgroup3"/>
      <ControlVariableMap name="hinc_bmc" category="4" marginal_variable="hhincgroup4"/>
      <ControlVariableMap name="wif_bmc" category="1" marginal_variable="wrkrs0"/>
      <ControlVariableMap name="wif_bmc" category="2" marginal_variable="wrkrs1"/>
      <ControlVariableMap name="wif_bmc" category="3" marginal_variable="wrkrs2"/>
      <ControlVariableMap name="wif_bmc" category="4" marginal_variable="wrkrs3"/>
    </Household>
    <GroupQuarter>
      <ControlVariableMap name="gq" category="1" marginal_variable="igq"/>
      <ControlVariableMap name="gq" category="2" marginal_variable="nigq"/>
    </GroupQuarter>
    <Person>
      <ControlVariableMap name="esr_bmc" category="1" marginal_variable="employed"/>
      <ControlVariableMap name="esr_bmc" category="2" marginal_variable="notemployed"/>
    </Person>
  </CorrespondenceMap>

  <Parameters>
    <IPFTolerance value="0.0001"/>
    <IPFIterations value="250"/>
    <IPUTolerance value="0.0001"/>
    <IPUIterations value="50"/>
    <SyntheticDrawsTolerance value="0.9999"/>
    <SyntheticDrawsIterations value="25"/>
    <RoundingProcedure name="arithmetic"/>
  </Parameters>
 
  <AdjustHouseholdMarginals modify="False">
    <HouseholdSize name="hhperson"/>
    <AverageHouseholdSizeLastCategory value="5.8"/>	
    <ReferencePersonTotalVariable name="employment"/>
  </AdjustHouseholdMarginals>

  <ModifiedMarginals modify="False">
    <GeoId state="24" county="510" taz="1">    
	<Variable name="wrkrs">
	  <Category value="1" old_marginal="30" new_marginal="10"/>
	  <Category value="2" old_marginal="144" new_marginal="124"/>
	  <Category value="3" old_marginal="30" new_marginal="10"/>
	  <Category value="4" old_marginal="144" new_marginal="124"/>
	</Variable>
    </GeoId>
  </ModifiedMarginals>


  <SynthesizeGeographies individual_geographies="True" entire_region="False">
    <CountyId state="11" county="1" synthesize_county="False"/>
    <CountyId state="24" county="3" synthesize_county="False"/>
    <CountyId state="24" county="5" synthesize_county="False"/>
    <CountyId state="24" county="13" synthesize_county="False"/>
    <CountyId state="24" county="21" synthesize_county="False"/>
    <CountyId state="24" county="25" synthesize_county="False"/>
    <CountyId state="24" county="27" synthesize_county="False"/>
    <CountyId state="24" county="31" synthesize_county="False"/>
    <CountyId state="24" county="33" synthesize_county="False"/>
    <CountyId state="24" county="510" synthesize_county="False"/>
    <GeoId state="24" county="510" taz="1"/>
    <GeoId state="11" county="1" taz="1900"/>
  </SynthesizeGeographies>

  <Outputs>
    <MultiwayTable location="/tmp/sizinc_popgen.dat" table_name="housing_synthetic">
      <Variable name="persons_bmc"/>
      <Variable name="hinc_bmc"/>
    </MultiwayTable>
    <MultiwayTable location="/tmp/wkrinc_popgen.dat" table_name="housing_synthetic">
      <Variable name="wif_bmc"/>
      <Variable name="hinc_bmc"/>
    </MultiwayTable>
    <SummaryTable location="/tmp/summary.dat"/>
    <SyntheticPopulationTables housing_location="/tmp/housing_synthetic.dat" person_location="/tmp/person_synthetic.dat"/>
  </Outputs>

  </Scenario>

</ProjectConfig>
